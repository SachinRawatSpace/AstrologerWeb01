{"version":3,"sources":["views/apps/calls/VideoCall.js"],"names":["randomID","len","result","i","chars","maxPos","length","charAt","Math","floor","random","getUrlParams","url","window","location","href","urlStr","split","URLSearchParams","App","astroName","localStorage","getItem","name","fullname","room","roomID","get","astroname","toString","myMeeting","element","kitToken","ZegoUIKitPrebuilt","generateKitTokenForTest","zp","create","userID","JSON","parse","joinRoom","maxUsers","container","useFrontFacingCamera","sharedLinks","protocol","host","pathname","turnOnCameraWhenJoining","scenario","mode","config","role","showScreenSharingButton","preJoinViewConfig","title","onUserLeave","astroid","value","userId","astroId","axiosConfig","post","then","res","console","log","catch","err","response","data","className","ref","style","width","height"],"mappings":";mSACA,06MASA,SAASA,EAASC,GAChB,IAAIC,EAAS,GACb,GAAIA,EAAQ,OAAOA,EACnB,IAEEC,EAFEC,EAAQ,iEACVC,EAASD,EAAME,OAGjB,IADAL,EAAMA,GAAO,EACRE,EAAI,EAAGA,EAAIF,EAAKE,IACnBD,GAAUE,EAAMG,OAAOC,KAAKC,MAAMD,KAAKE,SAAWL,IAEpD,OAAOH,EAGF,SAASS,IAA0C,IAA7BC,EAAG,uDAAGC,OAAOC,SAASC,KAE7CC,EAASJ,EAAIK,MAAM,KAAK,GAC5B,OAAO,IAAIC,gBAAgBF,GAGd,SAASG,IACtB,IAAMC,EAAYC,aAAaC,QAAQ,aACnCC,EAAgB,OAATH,QAAS,IAATA,OAAS,EAATA,EAAWI,SAClBC,EAAOZ,OAAOC,SAASC,KAAKE,MAAM,KAAK,GACrCS,EAASf,IAAegB,IAAI,WAAaF,GAAQzB,EAAS,GAC1D4B,EAAYL,GAAQvB,EAAS,GAAG6B,WAClCC,EAAS,uCAAG,WAAOC,GAAO,2EAEd,WAEO,mCAEfC,EAAWC,oBAAkBC,wBAJrB,WAEO,mCAKnBR,EACA1B,EAAS,GAAG6B,WACZD,GAIIO,EAAKF,oBAAkBG,OAAOJ,GAChCK,EAASC,KAAKC,MAAMlB,aAAaC,QAAQ,YAE7Ca,EAAGK,SAAS,CACVC,SAAU,EACVC,UAAWX,EACXY,sBAAsB,EACtBC,YAAa,CACX,CACErB,KAAM,gBACNX,IACEC,OAAOC,SAAS+B,SAChB,KACAhC,OAAOC,SAASgC,KAChB,eACAjC,OAAOC,SAASiC,SAChB,WACArB,IAGNsB,yBAAyB,EACzBC,SAAU,CACRC,KAAM,eACNC,OAAQ,CACNC,KAAM,SAIVC,yBAAyB,EACzBC,kBAAmB,CACjBC,MAAO,gCAETC,YAAa,WACX,IAAIC,EAAUpC,aAAaC,QAAQ,WAC/BoC,EAAQ,CACVC,OAAQtB,EACRuB,QAASH,GAEXI,IACGC,KAAK,qBAAsBJ,GAC3BK,MAAK,SAACC,GACLC,QAAQC,IAAI,sBAAuBF,MAEpCG,OAAM,SAACC,GACNH,QAAQC,IAAIE,EAAIC,SAASC,YAG9B,2CACJ,gBA/DY,sCAiEb,OACE,uBAAKC,UAAU,aACb,uBACEA,UAAU,kCACVC,IAAK1C,EACL2C,MAAO,CAAEC,MAAO,QAASC,OAAQ","file":"static/js/185.d8b4f821.chunk.js","sourcesContent":["/* eslint-disable react-hooks/rules-of-hooks */\n\nimport * as React from \"react\";\n// import React, { useEffect } from \"react\";\n// import { useParams } from \"react-router-dom\";\n// import './style.css';\n// import { getUserID } from \"../astrologerdetail\";\nimport axiosConfig from \"../../../axiosConfig\";\nimport { ZegoUIKitPrebuilt } from \"@zegocloud/zego-uikit-prebuilt\";\n\nfunction randomID(len) {\n  let result = \"\";\n  if (result) return result;\n  var chars = \"12345qwertyuiopasdfgh67890jklmnbvcxzMNBVCZXASDQWERTYHGFUIOLKJP\",\n    maxPos = chars.length,\n    i;\n  len = len || 5;\n  for (i = 0; i < len; i++) {\n    result += chars.charAt(Math.floor(Math.random() * maxPos));\n  }\n  return result;\n}\n\nexport function getUrlParams(url = window.location.href) {\n  // let urlStr = url.split(\"?\")[1];\n  let urlStr = url.split(\"/\")[7];\n  return new URLSearchParams(urlStr);\n}\n\nexport default function App() {\n  const astroName = localStorage.getItem(\"astroData\");\n  let name = astroName?.fullname;\n  let room = window.location.href.split(\"/\")[7];\n  const roomID = getUrlParams().get(\"roomID\") || room || randomID(5);\n  const astroname = name || randomID(5).toString();\n  let myMeeting = async (element) => {\n    // generate Kit Token\n    const appID = 1011009319;\n    // const response = getUserID();\n    const serverSecret = \"0b7c5477f07346c1a906c99d3f171f2e\";\n    //  console.log(window.location.pathname)\n    const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(\n      appID,\n      serverSecret,\n      roomID,\n      randomID(5).toString(),\n      astroname\n    );\n\n    // Create instance object from Kit Token.\n    const zp = ZegoUIKitPrebuilt.create(kitToken);\n    let userID = JSON.parse(localStorage.getItem(\"user_id\"));\n    // start the call\n    zp.joinRoom({\n      maxUsers: 2,\n      container: element,\n      useFrontFacingCamera: false,\n      sharedLinks: [\n        {\n          name: \"Personal link\",\n          url:\n            window.location.protocol +\n            \"//\" +\n            window.location.host +\n            \"/#/VideoCall\" +\n            window.location.pathname +\n            \"?roomID=\" +\n            roomID,\n        },\n      ],\n      turnOnCameraWhenJoining: false,\n      scenario: {\n        mode: \"OneONoneCall\",\n        config: {\n          role: \"Host\",\n        },\n      },\n\n      showScreenSharingButton: true,\n      preJoinViewConfig: {\n        title: \"Join AstroGyata Meeting Room\",\n      },\n      onUserLeave: () => {\n        let astroid = localStorage.getItem(\"astroId\");\n        let value = {\n          userId: userID,\n          astroId: astroid,\n        };\n        axiosConfig\n          .post(`/user/changeStatus`, value)\n          .then((res) => {\n            console.log(\"Astro CloneJob Stop\", res);\n          })\n          .catch((err) => {\n            console.log(err.response.data);\n          });\n      },\n    });\n  };\n\n  return (\n    <div className=\"container\">\n      <div\n        className=\"myCallContainer pt-3  container\"\n        ref={myMeeting}\n        style={{ width: \"100vw\", height: \"100vh\" }}\n      ></div>\n    </div>\n  );\n}\n"],"sourceRoot":""}